<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard - 99Shop</title>
  <script type="module" src="firebase.js"></script>
  <link href="https://cdn.tailwindcss.com" rel="stylesheet"/>
</head>
<body class="bg-gray-100 p-6">
  <h1 class="text-3xl font-bold mb-6">Admin Dashboard</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

    <!-- Add Product -->
    <div class="bg-white p-6 rounded shadow-md">
      <h2 class="text-xl font-semibold mb-4">Add Product</h2>
      <input id="name" placeholder="Product Name" class="w-full p-2 border mb-2"/>
      <input id="price" placeholder="Price ‚Çπ" type="number" class="w-full p-2 border mb-2"/>
      <input id="image" placeholder="Image URL" class="w-full p-2 border mb-2"/>
      <input id="category" placeholder="Category" class="w-full p-2 border mb-4"/>
      <button id="addBtn" class="bg-green-600 text-white px-4 py-2">Add Product</button>
      <p id="add-msg" class="mt-2 text-sm text-green-700"></p>
    </div>

    <!-- Delete Product -->
    <div class="bg-white p-6 rounded shadow-md">
      <h2 class="text-xl font-semibold mb-4">Delete Product</h2>
      <input id="deleteId" placeholder="Product ID" class="w-full p-2 border mb-4"/>
      <button id="deleteBtn" class="bg-red-600 text-white px-4 py-2">Delete Product</button>
      <p id="delete-msg" class="mt-2 text-sm text-red-700"></p>
    </div>

  </div>

  <script type="module">
    import { db } from './firebase.js';
    import { collection, addDoc, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    const addBtn = document.getElementById("addBtn");
    const deleteBtn = document.getElementById("deleteBtn");

    addBtn.onclick = async () => {
      const name = document.getElementById("name").value;
      const price = document.getElementById("price").value;
      const image = document.getElementById("image").value;
      const category = document.getElementById("category").value;

      const newProduct = { name, price, image, category };
      await addDoc(collection(db, "Products"), newProduct);
      document.getElementById("add-msg").innerText = "‚úÖ Product added successfully!";
    };

    deleteBtn.onclick = async () => {
      const deleteId = document.getElementById("deleteId").value;
      await deleteDoc(doc(db, "Products", deleteId));
      document.getElementById("delete-msg").innerText = "üóëÔ∏è Product deleted!";
    };
  </script>
</body>
</html>
